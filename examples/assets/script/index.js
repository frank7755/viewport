define("index",["./jquery","./viewport"],function(a,t,e){var i=a("./jquery"),r=a("./viewport");i(function(){function a(){var a=s.scrollTop(),t=e.hasClass("ui-nav-fixed");a>=20&&!t?(e.addClass("ui-nav-fixed"),e.after(o)):a<20&&t&&(o.remove(),e.removeClass("ui-nav-fixed"))}var t={},e=i("#nav"),n=e.find(".ui-body-nav li"),o=e.clone().removeAttr("id").empty();e.find("span[data-info]").each(function(){var a=i(this);t[a.attr("data-info")]=a});var d=new r(window,{target:".ui-body .ui-panel[data-ref]",threshold:[-164,0,0],delay:0});d.on("viewchange",function(a){for(var e in t)t.hasOwnProperty(e)&&t[e].text(a[e]);var r=a.target.shift();r&&(n.removeClass("ui-active"),i("#"+i(r).attr("data-ref")).addClass("ui-active"))}),d=new r(window,{target:".ui-body img[data-src]"}),d.on("viewchange",function(a){i.each(a.target,function(a,t){t=i(t);var e=t.attr("data-src");e&&(t.removeAttr("data-src"),t.addClass("ui-loading"),i("<img />").bind("load error",{image:t,src:e},function(a){var e=a.data.image,i=a.data.src;t.removeClass("ui-loading"),e.hide().attr("src",i).fadeIn("fast")}).attr("src",e))})});var s=i(window);s.on("scroll",a),a();var v=i("html, body");e.on("click",".ui-body-nav li",function(a){a.preventDefault();var t=this.id,e=i("[data-ref="+t+"]");v.animate({scrollTop:e.offset().top})})})});