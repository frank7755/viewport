define("is",[],function(e,r,t){"use strict";var n=Object.prototype.toString,o={type:function(e,r){if(r=(r+"").toLowerCase(),"array"===r&&Array.isArray)return Array.isArray(e);var t=n.call(e).toLowerCase();switch(r){case"nan":return"[object number]"===t&&e!==e;default:return t==="[object "+r+"]"}},string:function(e){return o.type(e,"string")},array:function(e){return o.type(e,"array")},number:function(e){return o.type(e,"number")},element:function(e){return void 0!==e&&"undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&1===e.nodeType}};t.exports=o});define("viewport",["./is","jquery"],function(e,t,r){"use strict";function i(e,t){if(s.number(e)&&isFinite(e))t&&(e=Math.abs(e)),e=[e,e,e,e];else if(s.array(e)){for(var r,i=[],o=e.length,n=0;n<o&&i.length<4;n++)r=e[n],s.number(r)&&isFinite(r)&&i.push(t?Math.abs(r):r);switch(i.length){case 0:e=[0,0,0,0];break;case 1:e=[i[0],i[0],i[0],i[0]];break;case 2:e=[i[0],i[1],i[0],i[1]];break;case 3:e=[i[0],i[1],i[2],i[1]];break;default:e=i}}else e=[0,0,0,0];return e}function o(e){return e===window?"CSS1Compat"===document.compatMode?document.documentElement:document.body:e}function n(e,t){if(window!==window&&s.element(e))throw new Error("Viewport must be window or a HTMLElement");var r=this;r.events={},r.id=a++,r.viewport=l(e),r.__viewport=l(o(e)),r.__initOptions(t),r.__findTarget(),r.__init()}var s=e("./is"),l=e("jquery"),a=0;n.prototype={__initOptions:function(e){e=l.extend({delay:150,target:null,threshold:0,skipHidden:!0,thresholdBorderReaching:0},e);var t=e.delay;t=s.number(t)&&isFinite(t)?Math.abs(t):150,e.delay=t,e.threshold=i(e.threshold),e.thresholdBorderReaching=i(e.thresholdBorderReaching,!0),this.options=e},__findTarget:function(){var e=this,t=e.options,r=t.target,i=e.__viewport;r=s.string(r)?i.find(r):s.element(r)&&l.contains(i[0],r)?l(r):r instanceof l?r.filter(function(){return l.contains(i[0],this)}):null,e.target=r},__filterTargetInViewport:function(e,t){var r=[],i=this,o=i.target;if(!(o instanceof l)||0===o.length)return r;var n=i.options,s=n.threshold,a=n.skipHidden,c=0,h=0,f=i.viewport;if(f[0]!==window){var p=f[0].getBoundingClientRect();c=p.top+(Math.round(parseFloat(f.css("border-top-width")))||0),h=p.left+(Math.round(parseFloat(f.css("border-left-width")))||0)}return o.each(function(i,o){var n=o.getBoundingClientRect();if(0==n.top&&0==n.bottom&&0==n.left&&0==n.right)a||r.push(o);else{var l=n.top-c,f=n.bottom-c,p=n.left-h,d=n.right-h;l-s[2]>=t||d+s[3]<=0||f+s[0]<=0||p-s[1]>=e||r.push(o)}}),r},__changeViewport:function(e,t,r){var i=this,o=i.options,n=i.viewport,s=i.__viewport,l=o.thresholdBorderReaching;if(n[0]===window||n.is(":visible")){var a=n.innerWidth(),c=n.innerHeight(),h=s[0].scrollWidth,f=s[0].scrollHeight,p={};return p.scrollTop=n.scrollTop(),p.scrollLeft=n.scrollLeft(),p.offsetY=p.scrollTop-t,p.offsetX=p.scrollLeft-r,p.emitter=e,p.type="viewchange",p.viewport=[a,c,h,f],p.target=i.__filterTargetInViewport(a,c),p.top=p.scrollTop-l[0]<=0,p.right=a+p.scrollLeft+l[1]>=h,p.bottom=c+p.scrollTop+l[2]>=f,p.left=p.scrollLeft-l[3]<=0,i.emit(p.type,p),p}},__init:function(){function e(e){var t=r.__changeViewport(e.type,s,l);t&&(s=t.scrollTop,l=t.scrollLeft)}var t,r=this,i=r.id,o=r.options,n=r.viewport,s=n.scrollTop(),l=n.scrollLeft(),a=".viewport-"+i;if(o.delay){var c;t=function(t){clearTimeout(c),c=setTimeout(function(){e(t)},o.delay)}}else t=e;n.on("scroll"+a+" resize"+a,t),r.__changeViewport("init",s,l)},on:function(e,t){var r=this;return r.events[e]=r.events[e]||l.Callbacks("memory stopOnFalse"),r.events[e].add(t),r},off:function(e,t){var r=this;switch(arguments.length){case 0:r.events={};break;case 1:delete r.events[e];break;default:r.events[e]&&r.events[e].remove(t)}return r},emit:function(e){var t=this,r=[].slice.call(arguments,1);return t.events[e]=t.events[e]||l.Callbacks("memory stopOnFalse"),this.events[e].fireWith(t,r),t},refresh:function(e){var t=this,r=t.viewport;return arguments.length&&s.type(e,"object")&&t.__initOptions(l.extend(t.options,e)),t.__findTarget(),t.__changeViewport("refresh",r.scrollTop(),r.scrollLeft()),t},destroy:function(){var e=this,t=e.viewport,r=".viewport-"+e.id;t.off("scroll"+r),t.off("resize"+r)}},r.exports=n});define("index",["./jquery","./viewport"],function(a,t,e){"use strict";var i=a("./jquery"),r=a("./viewport");i(function(){function a(){var a=s.scrollTop(),t=e.hasClass("ui-nav-fixed");a>=20&&!t?(e.addClass("ui-nav-fixed"),e.after(o)):a<20&&t&&(o.remove(),e.removeClass("ui-nav-fixed"))}var t={},e=i("#nav"),n=e.find(".ui-body-nav li"),o=e.clone().removeAttr("id").empty(),d=new r(window,{target:".ui-body .ui-panel[data-ref]",threshold:[-164,0,0],delay:1});d.on("viewchange",function(a){var t=a.target.shift();t&&(n.removeClass("ui-active"),i("#"+i(t).attr("data-ref")).addClass("ui-active"))}),e.find("span[data-info]").each(function(){var a=i(this);t[a.attr("data-info")]=a}),d=new r(window,{target:".ui-body img[data-src]"}),d.on("viewchange",function(a){var e;for(var r in t)t.hasOwnProperty(r)&&(e=a[r],"viewport"===r&&(e=e.join(", ")),t[r].text(e));i.each(a.target,function(a,t){t=i(t);var e=t.attr("data-src");e&&(t.removeAttr("data-src"),t.addClass("ui-loading"),i("<img />").on("load error",{image:t,src:e},function(a){var t=a.data.image,e=a.data.src;t.hide().removeClass("ui-loading").attr("src",e).fadeIn("fast")}).attr("src",e))})});var s=i(window);s.on("scroll",a),a();var v=i("html, body");e.on("click",".ui-body-nav li",function(a){a.preventDefault();var t=this.id,e=i("[data-ref="+t+"]");v.animate({scrollTop:e.offset().top})})})});